<!DOCTYPE html>
<html lang="en"
      th:replace="shared/_layout::layout('Categories', ~{::div#palidhje},null,null)">
<div id="palidhje" class="container py-5 list-fill">

  <div class="row justify-content-center">
    <div class="col-12 col-lg-9">

      <!-- Header -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
          <h3 class="display-6 fw-bold mb-1">Categories</h3>
          <p class="lead text-muted mb-0">Manage all your transaction categories</p>
        </div>

        <a th:href="@{/categories/new}" class="btn btn-primary btn-sm rounded-3 px-4">
          + New Category
        </a>
      </div>

      <!-- Card -->
      <div class="card border-0 shadow-sm rounded-4">
        <div class="card-body p-0">

          <div class="table-responsive p-3">
            <table class="table table-hover table-sm align-middle mb-0">
              <caption class="text-muted small" th:text="'Categories (' + ${categories.size()} + ')'">Categories</caption>
              <thead class="table-light">
              <tr>
                <th scope="col" class="px-4 py-3">#</th>
                <th scope="col" class="py-3">Name</th>
                <th scope="col" class="py-3">Transaction Type</th>
                <th scope="col" class="py-3 text-end px-4">Actions</th>
              </tr>
              </thead>

              <tbody >
              <tr th:each="cat, iter : ${categories}" >
                <td class="px-4 fw-semibold" th:text="${iter.count}"></td>

                <td th:text="${cat.name}" class="fw-semibold text-truncate" style="max-width:240px;"></td>

                <td>
                                <span class="badge rounded-pill bg-secondary"
                                      th:text="${cat.type}">
                                </span>
                </td>

                <td class="text-end px-4">
                  <a th:href="@{/categories/{id}/view(id=${cat.id})}"
                     class="btn btn-sm btn-outline-secondary rounded-3 me-1">
                    View
                  </a>
                  <a th:href="@{/categories/{id}/edit(id=${cat.id})}"
                     class="btn btn-sm btn-outline-primary rounded-3 me-1">
                    Edit
                  </a>
                  <a th:href="@{/categories/{id}/delete(id=${cat.id})}"
                     class="btn btn-sm btn-outline-danger rounded-3"
                     onclick="return confirm('Are you sure you want to delete this category?')">
                    Delete
                  </a>

                </td>
              </tr>

              <!-- Empty state -->
              <tr th:if="${#lists.isEmpty(categories)}">
                <td colspan="4" class="text-center py-4 text-muted">
                  No categories found ðŸ˜• <br>
                  <a th:href="@{categories/new}" class="btn btn-link mt-2">Create your first one</a>
                </td>
              </tr>
              </tbody>
            </table>
          </div>

        </div>
      </div>

    </div>
  </div>

</div>
</html>
